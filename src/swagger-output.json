{
  "swagger": "2.0",
  "info": {
    "title": "My API",
    "description": "Description",
    "version": "1.0.0"
  },
  "host": "localhost:8080",
  "basePath": "/",
  "schemes": [
    "http"
  ],
  "paths": {
    "/user": {
      "post": {
        "tags": [
          "Users"
        ],
        "description": "Register a new User",
        "responses": {
          "default": {
            "description": ""
          }
        }
      },
      "get": {
        "tags": [
          "Users"
        ],
        "description": "Retrieve all customer infos of the Employee/Manager Branch",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/:user_id": {
      "patch": {
        "tags": [
          "Users"
        ],
        "description": "Update an User",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/status/:user_id": {
      "patch": {
        "tags": [
          "Users"
        ],
        "description": "Toggle user status including employees possibly",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/signup": {
      "post": {
        "tags": [
          "Users"
        ],
        "description": "Register a new Brand",
        "parameters": [
          {
            "name": "brand",
            "in": "body",
            "description": "Brand data",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "cnpj": {
                  "type": "string",
                  "example": "58403919000106"
                },
                "password": {
                  "type": "string",
                  "example": "123456"
                }
              }
            }
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/employee": {
      "post": {
        "tags": [
          "Employee"
        ],
        "description": "Register a new Employee",
        "parameters": [
          {
            "name": "employee",
            "in": "body",
            "description": "Employee data",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "cpf": {
                  "type": "string",
                  "example": "04476272010"
                },
                "name": {
                  "type": "string",
                  "example": "Mateus Vieira"
                },
                "salary": {
                  "type": "number",
                  "example": 8000
                },
                "branch_id": {
                  "type": "number",
                  "example": 1
                }
              }
            }
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      },
      "get": {
        "tags": [
          "Employee"
        ],
        "description": "Retrieve Employees of your Brand if your are Admin and of your Branch if you are Manager",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/employee/activate": {
      "patch": {
        "tags": [
          "Employee"
        ],
        "description": "Activate an Employee creating a password",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/employee/status/:employee_id": {
      "patch": {
        "tags": [
          "Employee"
        ],
        "description": "Toggle the status of an Employee",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/user/employee/promote/:employee_id": {
      "patch": {
        "tags": [
          "Employee"
        ],
        "description": "Promote an Employee to be a Brand manager",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "description": "Login as Admin or Employee",
        "parameters": [
          {
            "name": "login",
            "in": "body",
            "description": "Login data",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "register": {
                  "type": "string",
                  "example": "cpf | cnpj"
                },
                "password": {
                  "type": "string",
                  "example": "123456"
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "description": "Refresh access token",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/branch": {
      "post": {
        "tags": [
          "Branches"
        ],
        "description": "Register a new Branch for some Brand",
        "parameters": [
          {
            "name": "branch",
            "in": "body",
            "description": "Branch data",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "example": "string"
                },
                "brand_id": {
                  "type": "string",
                  "example": "number"
                },
                "address": {
                  "type": "object",
                  "properties": {
                    "country": {
                      "type": "string",
                      "example": "string"
                    },
                    "province": {
                      "type": "string",
                      "example": "string"
                    },
                    "city": {
                      "type": "string",
                      "example": "string"
                    },
                    "description": {
                      "type": "string",
                      "example": "string"
                    },
                    "number": {
                      "type": "string",
                      "example": "number"
                    }
                  }
                },
                "phone": {
                  "type": "string",
                  "example": "string | undefined"
                }
              }
            }
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      },
      "get": {
        "tags": [
          "Branches"
        ],
        "description": "Retrieve all branches of the brand",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/branch/:branch_id": {
      "patch": {
        "tags": [
          "Branches"
        ],
        "description": "Update a Branch",
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/branch/status/:branch_id": {
      "patch": {
        "tags": [
          "Branches"
        ],
        "description": "Toggle the status of some Branch between ",
        "parameters": [
          {
            "name": "branch_id",
            "in": "path",
            "required": true,
            "type": "integer",
            "description": "ID of the Branch"
          }
        ],
        "responses": {
          "default": {
            "description": ""
          }
        }
      }
    },
    "/promotion": {
      "post": {
        "tags": [
          "Promotion"
        ],
        "description": "Register a new Promotion and link it to products",
        "parameters": [
          {
            "name": "promotion",
            "in": "body",
            "description": "Promotion data",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "title": {
                  "type": "string",
                  "example": "Black Friday"
                },
                "description": {
                  "type": "string",
                  "example": "Special discount"
                },
                "type": {
                  "type": "string",
                  "example": "P"
                },
                "value": {
                  "type": "number",
                  "example": 20
                },
                "constraint": {
                  "type": "number",
                  "example": 100
                },
                "start": {
                  "type": "string",
                  "example": "2025-11-01T00:00:00Z"
                },
                "end": {
                  "type": "string",
                  "example": "2025-11-30T23:59:59Z"
                },
                "branch_id": {
                  "type": "number",
                  "example": 1
                },
                "product_info_ids": {
                  "type": "array",
                  "example": [
                    1,
                    2,
                    3
                  ],
                  "items": {
                    "type": "number"
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          }
        }
      },
      "get": {
        "tags": [
          "Promotion"
        ],
        "description": "Get all promotions for the user branch",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/promotion/:promotion_id": {
      "delete": {
        "tags": [
          "Promotion"
        ],
        "description": "Delete a promotion by ID",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/promotion/:promotion_id/finalize": {
      "patch": {
        "tags": [
          "Promotion"
        ],
        "description": "Finalize a promotion by setting its end date to now",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/sale": {
      "post": {
        "tags": [
          "Sale"
        ],
        "description": "Register a new Sale for some User and updates Product stock",
        "responses": {
          "201": {
            "description": "Created"
          }
        }
      }
    },
    "/sale/branch": {
      "get": {
        "tags": [
          "Sale"
        ],
        "description": "Retrieve all sales from the branch with pagination",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/sale/:sale_id": {
      "delete": {
        "tags": [
          "Sale"
        ],
        "description": "Delete some sale and rollback all purchase Products",
        "responses": {
          "204": {
            "description": "No Content"
          }
        }
      }
    },
    "/sale/user/metrics": {
      "get": {
        "tags": [
          "Sale"
        ],
        "description": "Retrieve metrics for all branch users",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/sale/user/:user_id": {
      "get": {
        "tags": [
          "Sale"
        ],
        "description": "Retrieve all purchases made by some user",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/product": {
      "post": {
        "tags": [
          "Product"
        ],
        "description": "Register a new Product into some Brand",
        "parameters": [
          {
            "name": "product",
            "in": "body",
            "description": "Product data",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "example": "string"
                },
                "description": {
                  "type": "string",
                  "example": "string"
                },
                "info": {
                  "type": "object",
                  "properties": {
                    "price": {
                      "type": "string",
                      "example": "number"
                    },
                    "stock": {
                      "type": "string",
                      "example": "number"
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created"
          }
        }
      },
      "get": {
        "tags": [
          "Product"
        ],
        "description": "Retrieve all product infos of the Employee/Manager Branch",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/product/:product_id": {
      "patch": {
        "tags": [
          "Product"
        ],
        "description": "Toggle the status of a Product Info of a Branch",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  }
}